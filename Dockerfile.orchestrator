# Layer 4 â€” CSO Orchestrator (Reasoning Core + HTTP API)
# Only attached to orchestration-net.  Cannot reach the database directly.

FROM python:3.12-slim

WORKDIR /app

COPY pyproject.toml .
COPY cso_poc/ cso_poc/

RUN pip install --no-cache-dir \
    "mcp[cli]>=1.0.0" \
    "pydantic>=2.0" \
    "httpx>=0.27" \
    "httpx-sse>=0.4" \
    "fastapi>=0.115" \
    "uvicorn>=0.27" \
    "anthropic>=0.40"

EXPOSE 8001

CMD ["python", "-m", "cso_poc.orchestrator"]
